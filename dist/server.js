(()=>{var e={173:(e,t,r)=>{var n=r(185),a=n.Schema,c=n.model,o=new a({product_name:{type:String,required:!0},model:{type:String,required:!0},color:{type:String,default:null},characteristic:{type:String,required:!0},price:{type:Number,required:!0}});e.exports=c("Product",o)},860:e=>{"use strict";e.exports=require("express")},185:e=>{"use strict";e.exports=require("mongoose")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("@babel/runtime/helpers/asyncToGenerator");var t=r.n(e);const n=require("@babel/runtime/regenerator");var a=r.n(n),c=r(860),o=r.n(c);const s=require("cors");var u=r.n(s);const i=require("config");var l=r.n(i);const p=require("isomorphic-fetch");var m=r.n(p);const d=require("react-router-dom");var v=(0,r(860).Router)(),h=r(173);v.get("/api/products/all",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.find({});case 2:n=e.sent,r.json(n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),v.get("/api/products/search/:model",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.find({model:"".concat(t.params.model)});case 2:n=e.sent,r.json(n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),v.get("/api/product/:id",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.findById(t.params.id);case 3:n=e.sent,r.json(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(500).json({message:"Что-то пошло не так, попробуйте снова"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),v.post("/api/product/create",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h({product_name:t.body.product_name,model:t.body.model,color:t.body.color,characteristic:t.body.characteristic,price:t.body.price}),e.next=3,n.save();case 3:r.status(201).json({message:"Товар создан"});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());const f=v,b=require("serialize-javascript");var g=r.n(b);const E=require("react");var _=r.n(E);const y=require("react-dom/server");var w=r.n(y);const x=require("react-router-dom/server"),N=require("@babel/runtime/helpers/slicedToArray");var j=r.n(N),O=function(e){return _().createElement("h2",null,"Страница не найдена")};const k=require("@babel/runtime/helpers/defineProperty");var q=r.n(k);const P=require("@babel/runtime/helpers/extends");var S=r.n(P);const C=require("@babel/runtime/helpers/objectWithoutProperties");var A=r.n(C);var D=["children"],T=function(e){var t=e.children,r=A()(e,D);return _().createElement("button",S()({},r,{className:"mU08xtwFwuoFknw9UP5N"}),t)};var Z=function(e){return _().createElement("input",S()({className:"wgLlpzNxyhOrkrvdAbgL"},e))};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){q()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=function(){var e=(0,E.useState)({product_name:"",model:"",color:"",characteristic:"",price:""}),r=j()(e,2),n=r[0],c=r[1],o=function(){var e=t()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=3,fetch("http://localhost:3000/api/product/create",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _().createElement("form",{className:"QmlnVWglatdeq3SYYpGF"},_().createElement(Z,{type:"text",placeholder:"Товар",value:n.product_name,onChange:function(e){return c(F(F({},n),{},{product_name:e.target.value}))}}),_().createElement(Z,{type:"text",placeholder:"Модель товара",value:n.model,onChange:function(e){return c(F(F({},n),{},{model:e.target.value}))}}),_().createElement(Z,{type:"text",placeholder:"Цвет",value:n.color,onChange:function(e){return c(F(F({},n),{},{color:e.target.value}))}}),_().createElement(Z,{type:"text",placeholder:"Характеристики",value:n.characteristic,onChange:function(e){return c(F(F({},n),{},{characteristic:e.target.value}))}}),_().createElement(Z,{type:"number",placeholder:"Цена",value:n.price,onChange:function(e){return c(F(F({},n),{},{price:e.target.value}))}}),_().createElement(T,{onClick:o},"Создать товар"))};const U={img:"YkRptt4B63Pgz_EbGopZ",container:"vvVRLFJNKfKfl9ivP3ZQ",product:"ss6wfCtrebtjVvDHvnCv",product__content:"oUTMY4hUYsTK8e7CUPdZ",product__title:"K0r1qTeCFw7wVvYBEK5A",product__price:"K0hmFanxAT5yhX6DPEb5",product__info:"U1OO45wo4da6zAK0agZj"};var V=function(e){var t=e.product;return _().createElement("article",{onClick:function(){return window.open("http://localhost:3000/product/".concat(t._id),"_self")},className:"GYRvgAxZh4E6FsFQVh_L",key:t._id},_().createElement("div",{className:"mICrMAwSIWyLEpDMwl9i"},_().createElement("img",{className:"DN6cwhm0lyUcoZlK2C5T",src:"https://i.ibb.co/6b8fbVq/orig.jpg",alt:"product"})),_().createElement("div",{className:"CbIHWvT2UG00MctDXoWH"},_().createElement("p",{className:"sRrIZScqEqP9MZ0kB00p"},t.product_name," ",t.model),_().createElement("p",{className:"GvDoNBgZjZSUtu0DpDFw"},t.price," P")))};var I=function(e){var t=e.products,r=(0,E.useState)(t||[]),n=j()(r,2),a=n[0];return n[1],_().createElement("section",{className:"HyusbUvysZRb4drMCV2Q"},a.map((function(e){return _().createElement(V,{product:e,key:e._id})})))};const L=[{path:"/products",component:function(e){return _().createElement(I,{products:e.data})}},{path:"/product/:id",component:function(e){var t=e.data;return _().createElement("div",{className:U.container},_().createElement("article",{className:U.product},_().createElement("div",{className:U.product__img},_().createElement("img",{className:U.img,src:"https://i.ibb.co/6b8fbVq/orig.jpg",alt:"product"})),_().createElement("div",{className:U.product__content},_().createElement("p",{className:U.product__title},t.product_name," ",t.model),t.color?_().createElement("p",{className:U.product__info},"Цвет : ",t.color):_().createElement("span",null),_().createElement("p",{className:U.product__info},"Характеристики: ",_().createElement("br",null),t.characteristic),_().createElement("p",{className:U.product__info},"Цена : ",_().createElement("span",{className:U.product__price},t.price," P")))))}},{path:"/create",component:function(){return _().createElement("section",{className:"wVp5tl7Wej82v5roHmf1"},_().createElement("h1",{className:"uSoFlIqAZlcSWA3t1pSM"},"Создать новый товар"),_().createElement(K,null))}}],M=require("classnames");var H=r.n(M);const W={nav__list:"t7ksJ50pCyRHJdeoLKiH",nav__link:"ZuvZi_uwEs8sdw4btf1Q",nav__link_active:"Jz99lsKpChiPMtVRHKOT"};var Y=function(){var e=(0,d.useLocation)();return _().createElement("nav",{className:W.nav},_().createElement("ul",{className:W.nav__list},[{path:"/products",name:"Товары"},{path:"/create",name:"Создать товар"}].map((function(t){return _().createElement("li",{className:W.nav__item,key:t.name},_().createElement("a",{className:t.path===e.pathname?H()(W.nav__link,W.nav__link_active):W.nav__link,href:t.path},t.name))}))))};var J=function(e){return _().createElement("input",S()({className:"Plx6nbuV7tAg7mLUPd0h"},e))};var B=function(e){var t=e.search;return _().createElement("form",{className:"hDLvyTjvAjAbQa0p2KIv"},_().createElement(J,{onChange:function(e){return t(e.target.value)},placeholder:"Поиск...",type:"text"}))};var G=function(e){var t=e.search;return _().createElement("header",{className:"Oqo1TsdOdV_3WgFn_7oB"},_().createElement(B,{search:t}),_().createElement(Y,null))};const Q=require("axios");var z=r.n(Q),X=function(e){var r=(0,E.useState)(e.data||[]),n=j()(r,2),c=n[0],o=(n[1],function(){var e=t()(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z().get("/api/products/search/".concat(t));case 2:r=e.sent,Array.isArray(r.data)&&console.log(r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return _().createElement(E.Fragment,null,_().createElement(G,{search:o}),_().createElement("div",{className:"container"},_().createElement(d.Routes,null,L.map((function(e){var t=e.path,r=e.component;return _().createElement(d.Route,{key:t,path:t,element:_().createElement(r,{data:c})})})),_().createElement(d.Route,{path:"*",element:_().createElement(O,{data:c})}))))};function $(e,t){var r=w().renderToString(_().createElement(x.StaticRouter,{location:t},_().createElement(X,{data:e})));return'\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>SSR</title>\n            <link href="/main.css" rel="stylesheet">\n        </head>\n        <body>\n            <div id="app">'.concat(r,"</div>\n        </body>\n        <script>window.__INITIAL_DATA__=").concat(g()(e),'<\/script>\n        <script src="/bundle.js" defer><\/script>\n        </html>\n    ')}var ee=r(185),te=l().get("port")||5e3,re=l().get("db.host"),ne=l().get("db.port"),ae=l().get("db.name"),ce="mongodb://".concat(re,":").concat(ne,"/").concat(ae),oe=o()();function se(){return(se=t()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,ee.connect(ce,{useNewUrlParser:!0});case 4:oe.listen(te,(function(){console.log("Started on port:",te)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Db err"),process.exit(1);case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(0),console.log("Server err"),process.exit(1);case 17:case"end":return e.stop()}}),e,null,[[0,13],[1,7]])})))).apply(this,arguments)}oe.use(u()()),oe.use(o().static("dist")),oe.use(o().json({extended:!0})),oe.use(f),oe.get("*",(function(e,t,r){var n,a=L.find((function(t){return(0,d.matchPath)(t.path,e.url)}))||{},c=e.url;switch(a.path){case"/products":n="http://localhost:3000/api/products/all",m()(n).then((function(e){return e.text()})).then((function(r){var n=JSON.parse(r);t.send($(n,e.url))})).catch(r);break;case"/product/:id":n="http://localhost:3000/api".concat(c),m()(n).then((function(e){return e.text()})).then((function(r){var n=JSON.parse(r);t.send($(n,e.url))})).catch(r);break;default:t.send($(null,e.url)),r()}})),ee.connection.once("open",(function(e){console.log("Db connected:",ce)})),function(){se.apply(this,arguments)}()})()})();