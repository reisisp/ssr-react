(()=>{var e={173:(e,t,r)=>{var n=r(185),a=n.Schema,c=n.model,o=new a({product_name:{type:String,required:!0},model:{type:String,required:!0},color:{type:String,default:null},characteristic:{type:String,required:!0},price:{type:Number,required:!0}});e.exports=c("Product",o)},860:e=>{"use strict";e.exports=require("express")},185:e=>{"use strict";e.exports=require("mongoose")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("@babel/runtime/helpers/asyncToGenerator");var t=r.n(e);const n=require("@babel/runtime/regenerator");var a=r.n(n),c=r(860),o=r.n(c);const s=require("cors");var u=r.n(s);const i=require("config");var l=r.n(i);const p=require("isomorphic-fetch");var m=r.n(p);const d=require("react-router-dom");var v=(0,r(860).Router)(),h=r(173);v.get("/api/products/all",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.find({});case 2:n=e.sent,r.json(n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),v.get("/api/products/search/:model",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.find({model:"".concat(t.params.model)});case 2:n=e.sent,r.json(n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),v.get("/api/product/:id",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.findById(t.params.id);case 3:n=e.sent,r.json(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(500).json({message:"Что-то пошло не так, попробуйте снова"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),v.post("/api/product/create",function(){var e=t()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h({product_name:t.body.product_name,model:t.body.model,color:t.body.color,characteristic:t.body.characteristic,price:t.body.price}),e.next=3,n.save();case 3:r.status(201).json({message:"Товар создан"});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());const f=v,b=require("serialize-javascript");var E=r.n(b);const g=require("react");var y=r.n(g);const _=require("react-dom/server");var w=r.n(_);const x=require("react-router-dom/server"),N=require("@babel/runtime/helpers/slicedToArray");var j=r.n(N),k=function(e){return y().createElement("h2",null,"Страница не найдена")};const q=require("@babel/runtime/helpers/defineProperty");var O=r.n(q);const P=require("@babel/runtime/helpers/extends");var S=r.n(P);const C=require("@babel/runtime/helpers/objectWithoutProperties");var A=r.n(C);var D=["children"],T=function(e){var t=e.children,r=A()(e,D);return y().createElement("button",S()({},r,{className:"mU08xtwFwuoFknw9UP5N"}),t)};var Z=function(e){return y().createElement("input",S()({className:"wgLlpzNxyhOrkrvdAbgL"},e))};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){O()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=function(){var e=(0,g.useState)({product_name:"",model:"",color:"",characteristic:"",price:""}),r=j()(e,2),n=r[0],c=r[1],o=function(){var e=t()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=3,fetch("http://localhost:3000/api/product/create",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y().createElement("form",{className:"QmlnVWglatdeq3SYYpGF"},y().createElement(Z,{type:"text",placeholder:"Товар",value:n.product_name,onChange:function(e){return c(F(F({},n),{},{product_name:e.target.value}))}}),y().createElement(Z,{type:"text",placeholder:"Модель товара",value:n.model,onChange:function(e){return c(F(F({},n),{},{model:e.target.value}))}}),y().createElement(Z,{type:"text",placeholder:"Цвет",value:n.color,onChange:function(e){return c(F(F({},n),{},{color:e.target.value}))}}),y().createElement(Z,{type:"text",placeholder:"Характеристики",value:n.characteristic,onChange:function(e){return c(F(F({},n),{},{characteristic:e.target.value}))}}),y().createElement(Z,{type:"number",placeholder:"Цена",value:n.price,onChange:function(e){return c(F(F({},n),{},{price:e.target.value}))}}),y().createElement(T,{onClick:o},"Создать товар"))};const U={img:"YkRptt4B63Pgz_EbGopZ",container:"vvVRLFJNKfKfl9ivP3ZQ",product:"ss6wfCtrebtjVvDHvnCv",product__content:"oUTMY4hUYsTK8e7CUPdZ",product__title:"K0r1qTeCFw7wVvYBEK5A",product__price:"K0hmFanxAT5yhX6DPEb5",product__info:"U1OO45wo4da6zAK0agZj"};var I=function(e){var t=e.product;return y().createElement("article",{onClick:function(){return window.open("http://localhost:3000/product/".concat(t._id),"_self")},className:"GYRvgAxZh4E6FsFQVh_L",key:t._id},y().createElement("div",{className:"mICrMAwSIWyLEpDMwl9i"},y().createElement("img",{className:"DN6cwhm0lyUcoZlK2C5T",src:"https://i.ibb.co/6b8fbVq/orig.jpg",alt:"product"})),y().createElement("div",{className:"CbIHWvT2UG00MctDXoWH"},y().createElement("p",{className:"sRrIZScqEqP9MZ0kB00p"},t.product_name," ",t.model),y().createElement("p",{className:"GvDoNBgZjZSUtu0DpDFw"},t.price," P")))};var V=function(e){var t=e.products,r=(0,g.useState)(t||[]),n=j()(r,2),a=n[0];return n[1],y().createElement("section",{className:"HyusbUvysZRb4drMCV2Q"},a.map((function(e){return y().createElement(I,{product:e,key:e._id})})))};const L=[{path:"/products",component:function(e){return y().createElement(V,{products:e.data})}},{path:"/product/:id",component:function(e){var t=e.data;return y().createElement("div",{className:U.container},y().createElement("article",{className:U.product},y().createElement("div",{className:U.product__img},y().createElement("img",{className:U.img,src:"https://i.ibb.co/6b8fbVq/orig.jpg",alt:"product"})),y().createElement("div",{className:U.product__content},y().createElement("p",{className:U.product__title},t.product_name," ",t.model),t.color?y().createElement("p",{className:U.product__info},"Цвет : ",t.color):y().createElement("span",null),y().createElement("p",{className:U.product__info},"Характеристики: ",y().createElement("br",null),t.characteristic),y().createElement("p",{className:U.product__info},"Цена : ",y().createElement("span",{className:U.product__price},t.price," P")))))}},{path:"/create",component:function(){return y().createElement("section",{className:"wVp5tl7Wej82v5roHmf1"},y().createElement("h1",{className:"uSoFlIqAZlcSWA3t1pSM"},"Создать новый товар"),y().createElement(K,null))}}],M=require("classnames");var Y=r.n(M);const H={nav__list:"t7ksJ50pCyRHJdeoLKiH",nav__link:"ZuvZi_uwEs8sdw4btf1Q",nav__link_active:"Jz99lsKpChiPMtVRHKOT"};var W=function(){var e=(0,d.useLocation)();return y().createElement("nav",{className:H.nav},y().createElement("ul",{className:H.nav__list},[{path:"/products",name:"Товары"},{path:"/create",name:"Создать товар"}].map((function(t){return y().createElement("li",{className:H.nav__item,key:t.name},y().createElement("a",{className:t.path===e.pathname?Y()(H.nav__link,H.nav__link_active):H.nav__link,href:t.path},t.name))}))))};var J=function(e){return y().createElement("input",S()({className:"Plx6nbuV7tAg7mLUPd0h"},e))};var Q=function(e){var t=e.search;return y().createElement("form",{className:"hDLvyTjvAjAbQa0p2KIv"},y().createElement(J,{onChange:function(e){return t(e.target.value)},placeholder:"Поиск...",type:"text"}))};var B=function(e){var t=e.search;return y().createElement("header",{className:"QI1uYodB2iFm9jWEw6jT"},y().createElement(Q,{search:t}),y().createElement(W,null))};const G=require("axios");var z=r.n(G),X=function(e){var r=(0,g.useState)(e.data||[]),n=j()(r,2),c=n[0],o=(n[1],function(){var e=t()(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z().get("/api/products/search/".concat(t));case 2:r=e.sent,Array.isArray(r.data)&&console.log(r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return y().createElement(g.Fragment,null,y().createElement(B,{search:o}),y().createElement("div",{className:"container"},y().createElement(d.Routes,null,L.map((function(e){var t=e.path,r=e.component;return y().createElement(d.Route,{key:t,path:t,element:y().createElement(r,{data:c})})})),y().createElement(d.Route,{path:"*",element:y().createElement(k,{data:c})}))))};function $(e,t){var r=w().renderToString(y().createElement(x.StaticRouter,{location:t},y().createElement(X,{data:e})));return'\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>SSR</title>\n            <link href="/main.css" rel="stylesheet">\n        </head>\n        <body>\n            <div id="app">'.concat(r,"</div>\n        </body>\n        <script>window.__INITIAL_DATA__=").concat(E()(e),'<\/script>\n        <script src="/bundle.js" defer><\/script>\n        </html>\n    ')}var ee=r(185),te=l().get("port")||5e3,re=l().get("db.host"),ne=l().get("db.port"),ae=l().get("db.name"),ce="mongodb://".concat(re,":").concat(ne,"/").concat(ae),oe=o()();function se(){return(se=t()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,ee.connect(ce,{useNewUrlParser:!0});case 4:oe.listen(te,(function(){console.log("Started on port:",te)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Db err"),process.exit(1);case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(0),console.log("Server err"),process.exit(1);case 17:case"end":return e.stop()}}),e,null,[[0,13],[1,7]])})))).apply(this,arguments)}oe.use(u()()),oe.use(o().static("dist")),oe.use(o().json({extended:!0})),oe.use(f),oe.get("*",(function(e,t,r){var n,a=L.find((function(t){return(0,d.matchPath)(t.path,e.url)}))||{},c=e.url;switch(a.path){case"/products":n="http://localhost:3000/api/products/all",m()(n).then((function(e){return e.text()})).then((function(r){var n=JSON.parse(r);t.send($(n,e.url))})).catch(r);break;case"/product/:id":n="http://localhost:3000/api".concat(c),m()(n).then((function(e){return e.text()})).then((function(r){var n=JSON.parse(r);t.send($(n,e.url))})).catch(r);break;default:t.send($(null,e.url)),r()}})),ee.connection.once("open",(function(e){console.log("Db connected:",ce)})),function(){se.apply(this,arguments)}()})()})();